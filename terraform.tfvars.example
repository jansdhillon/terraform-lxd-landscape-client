pro_token        = "my-pro-token"
account_name     = "standalone"
fqdn             = "landscape.example.com"
registration_key = "key"

instances = [
  {
    image_alias = "jammy"
    client_config = {
      computer_title           = "jammy-proposed"
      ping_interval            = 10
      exchange_interval        = 10
      urgent_exchange_interval = 10
    }

    file = {
      source_path = "/home/ubuntu/terraform-lxd-landscape-client/benchmark_patch.py"
      target_path = "/tmp/benchmark_patch.py"
    }

    execs = {
      command       = ["python3", "/tmp/benchmark_patch.py"]
      enabled       = true
      trigger       = "once"
      record_output = true
      fail_on_error = false
    }

    additional_cloud_init = <<EOT
#cloud-config
apt:
  sources:
    jammy-proposed:
      source: "deb http://archive.ubuntu.com/ubuntu jammy-proposed main restricted universe multiverse"
package-upgrades: true
packages:
  - python3-psutil
write_files:
  - path: /etc/apt/preferences.d/proposed
    content: |
      Package: landscape-client landscape-common
      Pin: release a=jammy-proposed
      Pin-Priority: 600
EOT

  },

  {
    image_alias = "jammy"
    client_config = {
      computer_title           = "jammy-control"
      ping_interval            = 10
      exchange_interval        = 10
      urgent_exchange_interval = 10
    }

    file = {
      source_path = "/home/ubuntu/terraform-lxd-landscape-client/benchmark_patch.py"
      target_path = "/tmp/benchmark_patch.py"
    }

    execs = {
      command       = ["python3", "/tmp/benchmark_patch.py"]
      enabled       = true
      trigger       = "once"
      record_output = true
      fail_on_error = false
    }

    additional_cloud_init = <<EOT
#cloud-config
package-upgrades: true
packages:
  - python3-psutil
EOT

  }
]
